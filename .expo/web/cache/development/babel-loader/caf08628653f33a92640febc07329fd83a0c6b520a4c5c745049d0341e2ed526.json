{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport Paho from \"paho-mqtt\";\nimport { useEffect, useState } from \"react\";\nimport { StatusBar } from \"expo-status-bar\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport backgroundImage from \"./assets/background-image.png\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar client = new Paho.Client(\"public.mqtthq.com\", Number(1883), `inTopic-${parseInt(Math.random() * 100)}`);\nexport default function App() {\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    value = _useState2[0],\n    setValue = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    messageFromWemos = _useState4[0],\n    setMessageFromWemos = _useState4[1];\n  function onMessage(message) {\n    if (message.destinationName === \"inTopic\") {\n      setValue(parseInt(message.payloadString));\n    } else if (message.destinationName === \"outTopic\" && parseInt(message.payloadString) === 3) {\n      setMessageFromWemos(\"Switch has been open for more than 10 minutes!\");\n    }\n  }\n  useEffect(function () {\n    client.connect({\n      onSuccess: function onSuccess() {\n        console.log(\"Connected!\");\n        client.subscribe(\"outTopic\");\n        client.onMessageArrived = onMessage;\n      },\n      onFailure: function onFailure() {\n        console.log(\"Failed to connect!\");\n      }\n    });\n  }, []);\n  function changeValue(c) {\n    setValue(1);\n    value = 1;\n    var message = new Paho.Message(value.toString());\n    message.destinationName = \"inTopic\";\n    c.send(message);\n    setTimeout(function () {\n      setValue(0);\n      value = 0;\n      setMessageFromWemos(\"                         \");\n      message = new Paho.Message(value.toString());\n      message.destinationName = \"inTopic\";\n      c.send(message);\n    }, 5000);\n  }\n  function resetWemos() {\n    var resetMessage = new Paho.Message(\"1\");\n    resetMessage.destinationName = \"inTopic\";\n    client.send(resetMessage);\n  }\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsxs(ImageBackground, {\n      source: backgroundImage,\n      style: styles.image,\n      children: [_jsxs(View, {\n        style: styles.textContainer,\n        children: [_jsxs(Text, {\n          style: styles.output,\n          children: [\"Value is: \", value]\n        }), _jsx(Pressable, {\n          onPress: function onPress() {\n            changeValue(client);\n          },\n          title: \"Reset\",\n          color: \"red\"\n        })]\n      }), _jsx(StatusBar, {\n        style: \"auto\"\n      })]\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#9f9\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  image: {\n    flex: 1,\n    width: \"100%\",\n    height: \"100%\",\n    resizeMode: \"cover\"\n  },\n  textContainer: {\n    top: 50,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginTop: 100\n  },\n  output: {\n    top: 0,\n    fontSize: 20,\n    color: \"red\"\n  },\n  messageFromWemos: {\n    fontSize: 16,\n    color: \"red\",\n    marginTop: 10\n  },\n  reset: {\n    fontSize: 30,\n    backgroundColor: \"green\",\n    color: \"red\"\n  }\n});","map":{"version":3,"names":["Paho","useEffect","useState","StatusBar","StyleSheet","Text","View","Pressable","ImageBackground","backgroundImage","jsxs","_jsxs","jsx","_jsx","client","Client","Number","parseInt","Math","random","App","_useState","_useState2","_slicedToArray","value","setValue","_useState3","_useState4","messageFromWemos","setMessageFromWemos","onMessage","message","destinationName","payloadString","connect","onSuccess","console","log","subscribe","onMessageArrived","onFailure","changeValue","c","Message","toString","send","setTimeout","resetWemos","resetMessage","style","styles","container","children","source","image","textContainer","output","onPress","title","color","create","flex","backgroundColor","alignItems","justifyContent","width","height","resizeMode","top","marginTop","fontSize","reset"],"sources":["/Users/michaelcave/Desktop/Door_Alarm_MQTT_Email/React_Native_button/App.js"],"sourcesContent":["import Paho from \"paho-mqtt\";\nimport { useEffect, useState } from \"react\";\nimport { StatusBar } from \"expo-status-bar\";\nimport { StyleSheet, Text, View, Pressable,  ImageBackground } from \"react-native\";\nimport backgroundImage from \"./assets/background-image.png\";\n\nconst client = new Paho.Client(\n  \"public.mqtthq.com\",\n  Number(1883),\n  `inTopic-${parseInt(Math.random() * 100)}`\n);\n\nexport default function App() {\n  let [value, setValue] = useState(0);\n  const [messageFromWemos, setMessageFromWemos] = useState(\"\");\n\n  function onMessage(message) {\n    if (message.destinationName === \"inTopic\") {\n      setValue(parseInt(message.payloadString));\n    } else if (\n      message.destinationName === \"outTopic\" &&\n      parseInt(message.payloadString) === 3\n    ) {\n      // Handle message with value 3 from outTopic\n      setMessageFromWemos(\"Switch has been open for more than 10 minutes!\");\n    }\n  }\n\n  useEffect(() => {\n    client.connect({\n      onSuccess: () => {\n        console.log(\"Connected!\");\n        client.subscribe(\"outTopic\");\n        client.onMessageArrived = onMessage;\n      },\n      onFailure: () => {\n        console.log(\"Failed to connect!\");\n      },\n    });\n  }, []);\n\n  function changeValue(c) {\n    setValue(1);\n    value = 1;\n    var message = new Paho.Message(value.toString());\n    message.destinationName = \"inTopic\";\n    c.send(message);\n    setTimeout(() => {\n      setValue(0);\n      value = 0;\n      setMessageFromWemos(\"                         \");\n      message = new Paho.Message(value.toString());\n      message.destinationName = \"inTopic\";\n      c.send(message);\n    }, 5000);\n  }\n\n  function resetWemos() {\n    // Send a message to inTopic with the value of 1 to reset the Wemos D1 Mini\n    var resetMessage = new Paho.Message(\"1\");\n    resetMessage.destinationName = \"inTopic\";\n    client.send(resetMessage);\n  }\n\n  return (\n    <View style={styles.container}>\n      <ImageBackground source={backgroundImage} style={styles.image}>\n        <View style={styles.textContainer}>\n          <Text style={styles.output}>Value is: {value}</Text>\n          {/* {messageFromWemos && (\n            <Text style={styles.messageFromWemos}>{messageFromWemos}</Text>\n          )} */}\n          < Pressable\n            onPress={() => {\n              changeValue(client);\n            }}\n            title=\"Reset\"\n            color=\"red\"\n            // style={styles.reset}\n          />\n        </View>\n        <StatusBar style=\"auto\" />\n      </ImageBackground>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#9f9\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  image: {\n    flex: 1,\n    width: \"100%\",\n    height: \"100%\",\n    resizeMode: \"cover\",\n  },\n  textContainer: {\n    top: 50,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginTop: 100, // Adjust the margin top based on your requirement\n  },\n  output: {\n    top: 0,\n    fontSize: 20,\n    color: \"red\",\n  },\n  messageFromWemos: {\n    fontSize: 16,\n    color: \"red\",\n    marginTop: 10,\n  },\n  reset: {\n    fontSize: 30,\n    backgroundColor: \"green\",\n    color: \"red\", // Change this color to the desired color\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}